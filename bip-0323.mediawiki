<pre>
  BIP: 323
  Layer: Consensus (hard fork)
  Title: Market depending block size
  Author: Simon Cavegn <random@gmx.ch>
  Comments-Summary: No comments yet.
  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0323
  Status: Draft
  Type: Standards Track
  Created: 2019-03-28
</pre>

==Abstract==

Market depending block size:
If a sender is willing to pay a large fee, the transaction may be allowed in a block even if blocksize for lower fee transactions is full. Yet the blocksize is limited harshly by a formula.

{| class="wikitable sortable" style="width: auto; text-align: center; font-size: smaller; table-layout: fixed;"
!Transaction fee
!Resulting block size limit for the transaction (use formula for exact value)
|-
| 0 satoshi/byte
| about 41kb
|- 
| 1 satoshi/byte 
| about 322kb
|-
| 10 satoshi/byte 
| about 1Mb
|- 
| 100 satoshi/byte 
| about 2Mb
|- 
| 1k satoshi/byte 
| about 3Mb
|- 
| 10k satoshi/byte 
| about 4Mb
|- 
| 100k satoshi/byte 
| about 5Mb
|- 
| 1M satoshi/byte 
| about 6Mb
|- 
| 10M satoshi/byte 
| about 7Mb
|- 
| 1 bitcoin/byte 
| about 8Mb
|}

==Motivation==

# Keep block space small, waste less with spam, allow larger size when sender pays a lot.
# Allow wallets to calculate/display how much average free block space there is for each fee price.
# Allows senders to be more sure about how the fee/priority of their transaction will behave, especially in the case of increased adoption in the future.

==Specification==

* Every transaction has to fit into the following block space:
  floor( log10( 1.1d + Fee in satoshi per byte of current transaction) * 1024 * 1024 bytes )
  

==Implementation==

# Sort transactions in a block by "statoshi per byte fee" (lowest first)
# For each Transaction from lowest "statoshi per byte fee": Sum up the bytes of space used so far.
# For each Transaction: Check if "Sum up the bytes of space used so far" is smaller or equal to formula result.
# If this is valid for each transaction then the blocksize is valid.

==Backward compatibility==

Hard fork required.

==Discussion==

