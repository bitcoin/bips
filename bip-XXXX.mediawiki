<pre>
  BIP: ???
  Layer: Consensus (hard fork)
  Title: Logarithm of transaction fee limits block size
  Author: Simon Cavegn <random@gmx.ch>
  Comments-Summary: No comments yet.
  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-XXXX
  Status: Draft
  Type: Standards Track
  Created: 2019-03-28
</pre>

==Abstract==

Logarithm of transaction fee limits block size.

If a sender is willing to pay a large fee, then a transaction may be allowed in a block even if blocksize for lower fee-transactions is full. Yet the blocksize is limited harshly by a formula.

==Motivation==

# Keep block space small.
# Waste less with spam transactions.
# Auto balance Fees: Increase very low fees, Descrease very high fees.
# Allow larger size when sender pays a lot.
# Allow wallets to calculate/display how much average free block space there is for each fee price.
# Allow senders to have more control about how the fee/priority of their transaction will behave, especially in the case of increased adoption in the future.

==Specification==

Every transaction has to fit into the following block space:
    Input variable 'FeeInSatoshiPerByte': Must be positive or 0
      type: double
      unit: Satishi per byte
    Output:
      type: uint
      unit: bytes
    Formula:
      floor( log10( 1.1 + FeeInSatoshiPerByte ) * 1024 * 1024 )

==Implementation==

# Sort transactions by FeeInSatoshiPerByte (lowest first)
# For each transaction starting from lowest FeeInSatoshiPerByte: Sum up the bytes of space used so far. Check if summed up bytes of space used so far is smaller or equal than the formula result.
# If this is valid for each transaction then the blocksize is valid.

==How the formula behaves==

{| class="wikitable sortable" style="width: auto; text-align: center; font-size: smaller; table-layout: fixed;"
!Transaction fee
!Resulting block size limit for the transaction (use formula for exact value)
!Estimated basic transaction fee
!Estimated basic transaction fee in $ if btc would be 4000$
!Estimated total sum of fees in the block
|-
| 0 satoshi/byte
| about 41kb
| 0
| 0
| 0
|- 
| 1 satoshi/byte 
| about 322kb
| 250 sat
| 0.01 $
| 0.00322 btc
|-
| 10 satoshi/byte 
| about 1Mb
| 2500 sat
| 0.1 $
| 0.1 btc
|- 
| 100 satoshi/byte 
| about 2Mb
| 25000 sat
| 1 $
| 2 btc
|- 
| 1k satoshi/byte 
| about 3Mb
| 250000 sat
| 10 $
| 30 btc
|- 
| 10k satoshi/byte 
| about 4Mb
| 2500000 sat
| 100 $
| 400 btc
|- 
| 100k satoshi/byte 
| about 5Mb
| 25000000 sat
| 1000 $
| 5000 btc
|}

==Backward compatibility==

Soft fork: If applied AND old hardcoded block size limit is kept.

Hard fork: If applied AND old hardcoded block size limit is removed.

==Discussion==

